 version: "0.1"                                                                                                                                                                                                                                                      
 description: >                                                                                                                                                                                                                                                      
   Orchestrator-Workers workflow that decomposes a complex user input into clear,                                                                                                                                                                                    
   prioritized subtasks handled by specialized worker agents, then synthesizes                                                                                                                                                                                       
   their outputs into a comprehensive final solution. Designed for detailed reasoning,                                                                                                                                                                               
   task analysis, and systematic solution generation following the Orchestrator-Workers pattern.                                                                                                                                                                     
 runtime: "langgraph"                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                     
 llms:                                                                                                                                                                                                                                                               
   orchestrator_llm:                                                                                                                                                                                                                                                 
     type: "openai"                                                                                                                                                                                                                                                 
     model_name: "gpt-4.1-mini"                                                                                                                                                                                                                                      
     temperature: 0.3                                                                                                                                                                                                                                                
     params:                                                                                                                                                                                                                                                         
       max_tokens: 1200                                                                                                                                                                                                                                              
       system_prompt: |                                                                                                                                                                                                                                              
         You are an expert Orchestrator LLM. Your role is to:                                                                                                                                                                                                        
         1. Analyze and reason about the user's input prompt.                                                                                                                                                                                                        
         2. Break down the input topic into a prioritized list of clear, concise subtasks.                                                                                                                                                                           
         3. Assign each subtask to specialized Worker agents.                                                                                                                                                                                                        
         4. Collect and synthesize the Workers' outputs into a detailed, coherent final response.                                                                                                                                                                    
         Always produce structured JSON outputs specifying task lists and synthesis instructions.                                                                                                                                                                    
                                                                                                                                                                                                                                                                     
   analyze_worker:                                                                                                                                                                                                                                                   
     type: "openai"                                                                                                                                                                                                                                                 
     model_name: "gpt-4.1-mini"                                                                                                                                                                                                                                      
     temperature: 0.7                                                                                                                                                                                                                                                
     params:                                                                                                                                                                                                                                                         
       max_tokens: 800                                                                                                                                                                                                                                               
       system_prompt: |                                                                                                                                                                                                                                              
         You are a Worker LLM specialized in analyzing complex input prompts.                                                                                                                                                                                        
         Your task is to thoroughly interpret the input, clarify objectives,                                                                                                                                                                                         
         identify key concepts and constraints, and prepare a basis for task decomposition.                                                                                                                                                                          
         Provide a clear, concise analysis focusing on understanding the problem deeply.                                                                                                                                                                             
                                                                                                                                                                                                                                                                     
   reason_worker:                                                                                                                                                                                                                                                    
     type: "openai"                                                                                                                                                                                                                                                 
     model_name: "gpt-4.1-mini"                                                                                                                                                                                                                                      
     temperature: 0.7                                                                                                                                                                                                                                                
     params:                                                                                                                                                                                                                                                         
       max_tokens: 800                                                                                                                                                                                                                                               
       system_prompt: |                                                                                                                                                                                                                                              
         You are a Worker LLM specialized in reasoning and exploring the input topic.                                                                                                                                                                                
         Your task is to think step-by-step through the problem,                                                                                                                                                                                                     
         generate hypotheses or approaches, validate assumptions,                                                                                                                                                                                                    
         and identify challenges or knowledge gaps.                                                                                                                                                                                                                  
         Provide detailed reasoning focused on one key aspect per request.                                                                                                                                                                                           
                                                                                                                                                                                                                                                                     
   breakdown_worker:                                                                                                                                                                                                                                                 
     type: "openai"                                                                                                                                                                                                                                                 
     model_name: "gpt-4.1-mini"                                                                                                                                                                                                                                      
     temperature: 0.7                                                                                                                                                                                                                                                
     params:                                                                                                                                                                                                                                                         
       max_tokens: 800                                                                                                                                                                                                                                               
       system_prompt: |                                                                                                                                                                                                                                              
         You are a Worker LLM specialized in task decomposition.                                                                                                                                                                                                     
         Your role is to break the analyzed and reasoned input into a prioritized,                                                                                                                                                                                   
         clear, and actionable list of subtasks and subtasks.                                                                                                                                                                                                        
         Each subtask should be focused, non-overlapping, and essential to solving the overall problem.                                                                                                                                                              
                                                                                                                                                                                                                                                                     
   synthesis_worker:                                                                                                                                                                                                                                                 
     type: "openai"                                                                                                                                                                                                                                                 
     model_name: "gpt-4.1-mini"                                                                                                                                                                                                                                      
     temperature: 0.4                                                                                                                                                                                                                                                
     params:                                                                                                                                                                                                                                                         
       max_tokens: 1200                                                                                                                                                                                                                                              
       system_prompt: |                                                                                                                                                                                                                                              
         You are a Worker LLM specialized in synthesizing multiple worker outputs.                                                                                                                                                                                   
         Your task is to combine the subtasks and their results into a comprehensive,                                                                                                                                                                                
         coherent, and detailed final solution.                                                                                                                                                                                                                      
         Ensure clarity, logical flow, and completeness in your synthesis.                                                                                                                                                                                           
                                                                                                                                                                                                                                                                     
 retrievers: {}                                                                                                                                                                                                                                                      
 memory: {}                                                                                                                                                                                                                                                          
 functions: {}                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                                     
 workflow:                                                                                                                                                                                                                                                           
   type: "custom_graph"                                                                                                                                                                                                                                             
   nodes:                                                                                                                                                                                                                                                            
     - id: orchestrator_analyze                                                                                                                                                                                                                                      
       kind: agent                                                                                                                                                                                                                                                   
       ref: orchestrator_llm                                                                                                                                                                                                                                         
       stop: false                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                     
     - id: analyze_worker                                                                                                                                                                                                                                            
       kind: agent                                                                                                                                                                                                                                                   
       ref: analyze_worker                                                                                                                                                                                                                                           
       stop: false                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                     
     - id: reason_worker                                                                                                                                                                                                                                             
       kind: agent                                                                                                                                                                                                                                                   
       ref: reason_worker                                                                                                                                                                                                                                            
       stop: false                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                     
     - id: breakdown_worker                                                                                                                                                                                                                                          
       kind: agent                                                                                                                                                                                                                                                   
       ref: breakdown_worker                                                                                                                                                                                                                                         
       stop: false                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                     
     - id: synthesis_worker                                                                                                                                                                                                                                          
       kind: agent                                                                                                                                                                                                                                                   
       ref: synthesis_worker                                                                                                                                                                                                                                         
       stop: true                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                     
   edges:                                                                                                                                                                                                                                                            
     # Orchestrator takes user input and sends to analyze worker                                                                                                                                                                                                     
     - source: orchestrator_analyze                                                                                                                                                                                                                                  
       target: analyze_worker                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                     
     # Analyze worker output flows to reason worker                                                                                                                                                                                                                  
     - source: analyze_worker                                                                                                                                                                                                                                        
       target: reason_worker                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                                     
     # Reason worker output flows to breakdown worker                                                                                                                                                                                                                
     - source: reason_worker                                                                                                                                                                                                                                         
       target: breakdown_worker                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                     
     # Breakdown worker output flows back to orchestrator for task assignment                                                                                                                                                                                        
     - source: breakdown_worker                                                                                                                                                                                                                                      
       target: orchestrator_analyze                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                     
     # Orchestrator assigns subtasks to synthesis worker after collecting all results                                                                                                                                                                                
     - source: orchestrator_analyze                                                                                                                                                                                                                                  
       target: synthesis_worker                                                                                                                                                                                                                                      
       condition: "state.get('iteration_count', 0) >= 1"
